!function(t){var e={init:function(e){return this.each(function(){var r={input:"input[type=search]",trigger:{event:"keyup",element:void 0},trim:!0,caseSensitive:!1,timeout:5e3,sort:!1,notFoundElement:null,callback:function(){}};"object"==typeof e&&t.extend(!0,r,e);var a=t(this),s=null;if(void 0==r.trigger.element&&(r.trigger.element=r.input),r.trigger.element.length||t.error("Trigger element not found."),t(r.trigger.element).bind(r.trigger.event,function(){r.trigger.event.indexOf("key")<0&&(r.timeout=0);try{clearTimeout(s)}catch(t){}s=setTimeout(function(){i.call(void 0,a,r)},r.timeout)}),r.sort){var o=a.find("th:not([data-tsort=disabled])");o.append('<span class="caret"></span>').attr("data-tsort","desc"),o.css("cursor","pointer").addClass("tfsort").bind("click",function(){n.call(void 0,this)})}})}},i=function(e,i){var n=t(i.input).val()||t(i.input).text(),a=1,s=[],o=[];if(n=n.trim().split(" "),i.trim&&(n=n.map(function(t){return t.trim()})),i.caseSensitive||(n=n.map(function(t){return t.toLowerCase()})),n.map(function(t,e){t.trim().length||n.splice(e,1)}),n.length){{e.find("tbody tr").length-1}e.find("tbody tr").each(function(){var e=0,r=[];t(this).find("td:not([data-tfilter=disabled])").each(function(){if("disabled"==t(this).closest("table").find("th:nth-child("+(t(this).parent().find("td").index(t(this).get(0))+1)+")").attr("data-tfilter"))return!0;var e=t(this).text().trim();return e.length?(i.caseSensitive||(e=e.toLowerCase()),void r.push(e)):!0}),n.forEach(function(t){r.every(function(i){return i.indexOf(t)>=0?(e++,!1):!0})}),e=e==n.length,!e&&t(this).is(":visible")?s.push(this):e&&t(this).is(":hidden")&&o.push(this)})}else o=e.find("tbody tr").toArray();o.length&&o.push(e.get(0)),t(o).show(a),t(s).hide(a),t(o.concat(s)).promise().done(function(){i.callback.call(),r(e,i.notFoundElement)})},n=function(e){e=t(e);var i=e.closest("table").find("tbody td:nth-child("+(e.parent().find("th").index(e.get(0))+1)+")"),n=[];e.filter("[data-tsort=asc]").length?e.attr("data-tsort","desc"):e.attr("data-tsort","asc"),"asc"==e.attr("data-tsort")?t(e).find("span.caret").css("transform","rotate(180deg)"):t(e).find("span.caret").css("transform","rotate(0deg)"),i.each(function(){n[n.length]={text:null,obj:t(this).closest("tr")};var i;switch(e.attr("data-tsort-type")){case"number":i=parseFloat(t(this).text().replace(/[,]/g,".").replace(/[^0-9\.\-]/g,""));break;case"date":try{i=new Date(t(this).text()).getTime()}catch(r){i=0}break;case"date-br":i=t(this).text().match(/[0-9\/]+[\s]+[0-9]+[:]/g)?t(this).text().split(" ")[0].split("/").reverse().join("-")+" "+t(this).text().split(" ")[1]:t(this).text().match(/[0-9]{2}[\/]{1}[0-9]{2}[\/]{1}[0-9]{4}/g)?t(this).text().split("/").reverse().join("-"):0,i=new Date(i).getTime();break;default:i=t(this).text().toLowerCase()}n[n.length-1].text=i});for(var r=0;r<n.length;r++)for(var a=0;a<n.length;a++)(n[r].text<n[a].text&&"asc"==e.attr("data-tsort")||n[r].text>n[a].text&&"desc"==e.attr("data-tsort"))&&(temp=n[r],n[r]=n[a],n[a]=temp);for(r=0;r<n.length;r++)t(e).closest("table").find("tbody").append(n[r].obj)},r=function(e,i){i&&(e.find("tbody tr:visible").length?t(i).hide(1):t(i).show(1),e.find("tbody tr:visible").length||t(e).hide(1))};t.fn.tableFilter=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void t.error("the method "+i+" does not exist on tableFilter"):e.init.apply(this,arguments)}}(jQuery);